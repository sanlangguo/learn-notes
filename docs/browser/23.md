## 23-渲染流水线：CSS如何影响首次加载时的白屏时间？
本文将深入讨论浏览器中CSS的工作原理，并分析性能瓶颈，以及如何减少首次加载时的白屏时间。CSS是页面中非常重要的资源，它决定了页面最终显示出来的效果，并影响着用户对整个网站的第一体验。

### 渲染流水线视角下的CSS
在渲染流水线的视角下，我们可以通过代码示例来看看最简单的渲染流程。这段代码由CSS文件和HTML文件构成，当打开这段HTML文件时，渲染流水线会经过以下步骤：

1. 发起主页面的请求，请求被送到网络进程中去执行。
2. 网络进程接收到返回的HTML数据之后，将其发送给渲染进程。
3. 渲染进程会解析HTML数据并构建DOM。
4. 预解析线程会解析出一个外部的CSS文件，并发起CSS文件的下载。
5. 在DOM构建结束之后、CSS文件还未下载完成的这段时间内，渲染流水线无事可做，因为下一步是合成布局树，而合成布局树需要CSSOM和DOM，所以这里需要等待CSS加载结束并解析成CSSOM。
6. 有了DOM和CSSOM，接下来就可以合成布局树了。

### CSS对首次加载时的白屏时间的影响

由此可见，CSS对于首次加载时的白屏时间有很大影响。在DOM构建结束之后、CSS文件还未下载完成的这段时间内，渲染流水线无事可做，因为下一步是合成布局树，而合成布局树需要CSSOM和DOM，所以这里需要等待CSS加载结束并解析成CSSOM。因此，减少CSS文件的大小和数量可以有效地减少首次加载时的白屏时间。

### 总结
理解浏览器中CSS的工作原理对于优化页面至关重要。在渲染流水线中，CSS对于首次加载时的白屏时间有很大影响。减少CSS文件的大小和数量可以有效地减少首次加载时的白屏时间。