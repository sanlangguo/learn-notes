## 06-渲染流程（下）：HTML、CSS和JavaScript，是如何变成页面的？
本文是渲染流水线的第二部分，主要介绍渲染流水线后面的阶段。在上一篇文章中，我们讲解了渲染流水线中的DOM生成、样式计算和布局三个阶段。

### 分层
在本文中，我们介绍了分层这一阶段。在布局树中，每个元素的位置信息都已经计算出来了，但是为了实现一些复杂的效果，如3D变换、页面滚动和z-indexing等，渲染引擎需要为特定的节点生成专用的图层，并生成一棵对应的图层树（LayerTree）。图层叠加在一起构成了最终的页面图像。通过Chrome开发者工具中的“Layers”标签，可以可视化页面的分层情况。

### 图层绘制
在图层分割后，渲染引擎将开始在每个图层上绘制内容。这个过程包括将元素转换为位图、应用滤镜和混合模式等。这些操作都是在GPU上执行的，因为GPU可以并行绘制多个图层。

### 栅格化
栅格化是将图层转换为位图的过程。在栅格化之前，渲染引擎会检查图层是否需要被栅格化，如果不需要，则直接将它们传递给合成器。如果需要，则会创建一个位图，并将图层内容绘制到位图上。

### 合成
合成是将多个图层合并成一个单一的图像的过程。在合成器中，渲染引擎会将每个图层绘制到一个单独的纹理中，并将它们组合起来形成最终的页面图像。这个过程是在GPU上执行的，并且可以使用硬件加速。

### 总结
在本文中，我们介绍了渲染流水线中的分层、图层绘制、栅格化和合成四个阶段。这些阶段是构成浏览器页面渲染过程中不可或缺的部分。


